(()=>{"use strict";class t{constructor(t,e,n,i){this.title=t,this.description=e,this.dueDate=n,this.priority=i,this.notes=[],this.checklist=[]}}class e{constructor(t){this.title=t,this.items={},this.active=!1}}function n(t){return new e(t)}function i(){return JSON.parse(localStorage.getItem("listCollection"))}function l(t){localStorage.setItem("listCollection",JSON.stringify(t))}const d=document.getElementById("lists-container"),c=document.getElementById("comments-container");function o(t){s(d);for(const[e,n]of Object.entries(t)){let t=document.createElement("button");t.dataset.id=e,t.innerHTML=n.title,1==n.active?(t.dataset.active=!0,m(n)):(t.dataset.active=!1,t.addEventListener("click",(function(t){u(t.target)}))),d.appendChild(t)}}function a(){let t=d.children;for(let e=0;e<t.length;e++){let n=t[e];if(console.log(n),console.log(n.dataset.active),"true"==n.dataset.active)return n}}function s(t){for(;t.firstChild;)t.firstChild.remove()}function r(t){let e,n=Object.keys(t);return e=n.length>0?parseInt(n[n.length-1])+1:1,e}function u(t){let e=a(),n=i(),d=n[parseInt(t.dataset.id)],c=n[parseInt(e.dataset.id)];d.active=!0,c.active=!1,n[parseInt(t.dataset.id)]=d,n[parseInt(e.dataset.id)]=c,l(n),o(n)}function m(t){console.log("in display todos"),s(c);for(const[e,n]of Object.entries(t.items)){let t=f(e,n);c.appendChild(t)}}function f(t,e){let n=document.createElement("div");n.classList.add("card");let i=document.createElement("div");i.classList.add("card-body");let l=document.createElement("h2");l.classList.add("card-title"),l.innerHTML=e.title;let d=document.createElement("p");return d.classList.add("card-text"),d.innerHTML=e.dueDate,i.appendChild(l),i.appendChild(d),n.appendChild(i),n.dataset.id=t,n}document.getElementById("add-todo").addEventListener("click",(function(){let e=function(){let e=[document.getElementById("title").value,document.getElementById("description").value,document.getElementById("dueDate").value,document.getElementById("priority").value];return new t(e[0],e[1],e[2],e[3])}(),n=a(),d=i(),c=d[n.dataset.id],o=r(c.items);c.items[o]=e,console.log("list"),console.log(c),d[n.dataset.id]=c,l(d),m(c)})),document.getElementById("add-todolist").addEventListener("click",(function(){let t=n(document.getElementById("list-title").value),e=i();e[r(e)]=t,l(e),o(e)})),window.onload=function(){o(function(){let t;return t=0==localStorage.length?function(){let t={},e=n("Default List");return e.active=!0,t[1]=e,l(t),t}():i(),t}())}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQ0UsSUFBSTNCLEVBQWlCLEdBQ2pCa0MsRUFBT3pDLEVBQWUsZ0JBTTFCLE9BTEF5QyxFQUFLMUMsUUFBUyxFQUVkUSxFQUFlLEdBQUtrQyxFQUNwQm5DLEVBQWNDLEdBRVBBLEVBeUNZdUQsR0FFQTdELElBRVpNLEVBMURjd0QsTSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby8uL3NyYy90b2RvLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLy4vc3JjL3RvZG8tbGlzdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbG9jYWxTdG9yYWdlLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyB0b2RvSXRlbSB7XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMubm90ZXMgPSBbXTtcbiAgICB0aGlzLmNoZWNrbGlzdCA9IFtdO1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlTmV3VG9EbygpIHtcbiAgbGV0IGluZm8gPSBnZXRUb2RvSW5mbygpO1xuXG4gIGxldCB0aXRsZSA9IGluZm9bMF0sXG4gICAgICBkZXNjcmlwdGlvbiA9IGluZm9bMV0sIFxuICAgICAgZHVlRGF0ZSA9IGluZm9bMl0sIFxuICAgICAgcHJpb3JpdHkgPSBpbmZvWzNdO1xuXG4gIGxldCB0b2RvID0gbmV3IHRvZG9JdGVtKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpO1xuICByZXR1cm4gdG9kbztcbn07XG5cbmZ1bmN0aW9uIGdldFRvZG9JbmZvKCkge1xuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICBsZXQgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlRGF0ZVwiKS52YWx1ZTtcbiAgbGV0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKS52YWx1ZTtcblxuICByZXR1cm4gW1xuICAgIHRpdGxlLCBcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkdWVEYXRlLFxuICAgIHByaW9yaXR5XG4gIF07XG59O1xuXG4iLCJjbGFzcyB0b2RvTGlzdCB7XG4gIGNvbnN0cnVjdG9yKHRpdGxlKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuaXRlbXMgPSB7fTtcbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlVG9Eb0xpc3QodGl0bGUpIHtcbiAgbGV0IGxpc3QgPSBuZXcgdG9kb0xpc3QodGl0bGUpO1xuICByZXR1cm4gbGlzdDtcbn07XG5cbiIsImZ1bmN0aW9uIGxvYWRGcm9tU3RvcmFnZSgpIHtcbiAgbGV0IGxpc3RDb2xsZWN0aW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxpc3RDb2xsZWN0aW9uXCIpKTtcbiAgcmV0dXJuIGxpc3RDb2xsZWN0aW9uO1xufTtcblxuZnVuY3Rpb24gc2F2ZVRvU3RvcmFnZShsaXN0Q29sbGVjdGlvbikge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImxpc3RDb2xsZWN0aW9uXCIsIEpTT04uc3RyaW5naWZ5KGxpc3RDb2xsZWN0aW9uKSk7XG59O1xuXG5leHBvcnQgeyBsb2FkRnJvbVN0b3JhZ2UsIHNhdmVUb1N0b3JhZ2UgfSIsImltcG9ydCBjcmVhdGVOZXdUb0RvIGZyb20gXCIuL3RvZG8taXRlbVwiO1xuaW1wb3J0IGNyZWF0ZVRvRG9MaXN0IGZyb20gXCIuL3RvZG8tbGlzdFwiO1xuaW1wb3J0IHsgc2F2ZVRvU3RvcmFnZSwgbG9hZEZyb21TdG9yYWdlIH0gZnJvbSBcIi4vbG9jYWxTdG9yYWdlXCI7XG5cbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdHMtY29udGFpbmVyXCIpO1xuY29uc3QgY29tbWVudHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbW1lbnRzLWNvbnRhaW5lclwiKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtdG9kb1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gIGxldCB0b2RvID0gY3JlYXRlTmV3VG9EbygpO1xuICBsZXQgYWN0aXZlTGlzdERvbSA9IGdldEFjdGl2ZUxpc3QoKTtcblxuICBsZXQgbGlzdENvbGxlY3Rpb24gPSBsb2FkRnJvbVN0b3JhZ2UoKTtcbiAgbGV0IGxpc3QgPSBsaXN0Q29sbGVjdGlvblthY3RpdmVMaXN0RG9tLmRhdGFzZXQuaWRdXG5cbiAgbGV0IGtleSA9IGdldEtleShsaXN0Lml0ZW1zKTtcbiAgbGlzdC5pdGVtc1trZXldID0gdG9kbztcbiAgY29uc29sZS5sb2coXCJsaXN0XCIpO1xuICBjb25zb2xlLmxvZyhsaXN0KTtcblxuICBsaXN0Q29sbGVjdGlvblthY3RpdmVMaXN0RG9tLmRhdGFzZXQuaWRdID0gbGlzdDtcbiAgc2F2ZVRvU3RvcmFnZShsaXN0Q29sbGVjdGlvbik7XG5cbiAgZGlzcGxheVRvRG9zKGxpc3QpO1xufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXRvZG9saXN0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgbGV0IHRpdGxlID0gZ2V0VG9kb0xpc3RJbmZvKCk7XG4gIGxldCBuZXdMaXN0ID0gY3JlYXRlVG9Eb0xpc3QodGl0bGUpO1xuICBsZXQgbGlzdENvbGxlY3Rpb24gPSBsb2FkRnJvbVN0b3JhZ2UoKTtcbiAgbGV0IGtleSA9IGdldEtleShsaXN0Q29sbGVjdGlvbik7XG5cbiAgbGlzdENvbGxlY3Rpb25ba2V5XSA9IG5ld0xpc3Q7XG4gIHNhdmVUb1N0b3JhZ2UobGlzdENvbGxlY3Rpb24pO1xuICBkaXNwbGF5TGlzdChsaXN0Q29sbGVjdGlvbik7XG5cbn0pXG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgbGV0IGxpc3RDb2xsZWN0aW9uID0gY2hlY2tMb2NhbEZvckVtcHR5KCk7XG4gIGRpc3BsYXlMaXN0KGxpc3RDb2xsZWN0aW9uKTtcblxufTsgXG5cbmZ1bmN0aW9uIGluaXRpYWxpemVQYWdlKCkge1xuICBsZXQgbGlzdENvbGxlY3Rpb24gPSB7fTtcbiAgbGV0IGxpc3QgPSBjcmVhdGVUb0RvTGlzdChcIkRlZmF1bHQgTGlzdFwiKTtcbiAgbGlzdC5hY3RpdmUgPSB0cnVlO1xuXG4gIGxpc3RDb2xsZWN0aW9uWzFdID0gbGlzdDtcbiAgc2F2ZVRvU3RvcmFnZShsaXN0Q29sbGVjdGlvbik7XG5cbiAgcmV0dXJuIGxpc3RDb2xsZWN0aW9uO1xufTtcblxuZnVuY3Rpb24gZGlzcGxheUxpc3QobGlzdENvbGxlY3Rpb24pIHtcbiAgd2lwZUNvbnRhaW5lcihjb250YWluZXIpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhsaXN0Q29sbGVjdGlvbikpIHtcbiAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBidXR0b24uZGF0YXNldC5pZCA9IGtleTtcbiAgICBidXR0b24uaW5uZXJIVE1MID0gdmFsdWUudGl0bGU7XG4gIFxuICAgIGlmICh2YWx1ZS5hY3RpdmUgPT0gdHJ1ZSkge1xuICAgICAgYnV0dG9uLmRhdGFzZXQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgIGRpc3BsYXlUb0Rvcyh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNoYW5nZUFjdGl2ZShlLnRhcmdldCk7XG4gICAgICB9KVxuICAgIH07XG4gIFxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xuICB9O1xufTtcblxuZnVuY3Rpb24gZ2V0QWN0aXZlTGlzdCgpIHtcbiAgbGV0IGNoaWxkcmVuID0gY29udGFpbmVyLmNoaWxkcmVuO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgY29uc29sZS5sb2coY2hpbGQpO1xuICAgIGNvbnNvbGUubG9nKGNoaWxkLmRhdGFzZXQuYWN0aXZlKTtcblxuICAgIGlmIChjaGlsZC5kYXRhc2V0LmFjdGl2ZSA9PSBcInRydWVcIikge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG4gIH07XG59O1xuXG5mdW5jdGlvbiBjaGVja0xvY2FsRm9yRW1wdHkgKCkge1xuICBsZXQgbGlzdENvbGxlY3Rpb247XG5cbiAgaWYgKGxvY2FsU3RvcmFnZS5sZW5ndGggPT0gMCkge1xuICAgIGxpc3RDb2xsZWN0aW9uID0gaW5pdGlhbGl6ZVBhZ2UoKTtcbiAgfSBlbHNlIHtcbiAgICBsaXN0Q29sbGVjdGlvbiA9IGxvYWRGcm9tU3RvcmFnZSgpO1xuICB9O1xuICByZXR1cm4gbGlzdENvbGxlY3Rpb247XG59O1xuXG5mdW5jdGlvbiBnZXRUb2RvTGlzdEluZm8oKSB7XG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdC10aXRsZVwiKS52YWx1ZTtcbiAgcmV0dXJuIHRpdGxlO1xufTtcblxuZnVuY3Rpb24gd2lwZUNvbnRhaW5lcihjb250YWluZXIpIHtcbiAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgY29udGFpbmVyLmZpcnN0Q2hpbGQucmVtb3ZlKCk7XG4gIH07XG59O1xuXG5mdW5jdGlvbiBnZXRLZXkobGlzdCkge1xuICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGxpc3QpO1xuXG4gIGxldCBuZXdLZXk7XG4gIGlmIChrZXlzLmxlbmd0aCA+IDApIHtcbiAgICBuZXdLZXkgPSBwYXJzZUludChrZXlzW2tleXMubGVuZ3RoLTFdKSArIDE7XG4gIH0gZWxzZSB7XG4gICAgbmV3S2V5ID0gMTtcbiAgfVxuXG4gIHJldHVybiBuZXdLZXk7XG59O1xuXG5mdW5jdGlvbiBjaGFuZ2VBY3RpdmUodGFyZ2V0KSB7XG4gIGxldCBjdXJyZW50ID0gZ2V0QWN0aXZlTGlzdCgpO1xuICBcbiAgbGV0IGxpc3RDb2xsZWN0aW9uID0gbG9hZEZyb21TdG9yYWdlKCk7XG4gIGxldCBjaGFuZ2luZ0xpc3QgPSBsaXN0Q29sbGVjdGlvbltwYXJzZUludCh0YXJnZXQuZGF0YXNldC5pZCldO1xuICBsZXQgb2xkTGlzdCA9IGxpc3RDb2xsZWN0aW9uW3BhcnNlSW50KGN1cnJlbnQuZGF0YXNldC5pZCldO1xuICBjaGFuZ2luZ0xpc3QuYWN0aXZlID0gdHJ1ZTtcbiAgb2xkTGlzdC5hY3RpdmUgPSBmYWxzZTtcbiAgbGlzdENvbGxlY3Rpb25bcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuaWQpXSA9IGNoYW5naW5nTGlzdDtcbiAgbGlzdENvbGxlY3Rpb25bcGFyc2VJbnQoY3VycmVudC5kYXRhc2V0LmlkKV0gPSBvbGRMaXN0O1xuICBzYXZlVG9TdG9yYWdlKGxpc3RDb2xsZWN0aW9uKTtcbiAgZGlzcGxheUxpc3QobGlzdENvbGxlY3Rpb24pO1xufTtcblxuZnVuY3Rpb24gZGlzcGxheVRvRG9zKGxpc3QpIHtcbiAgY29uc29sZS5sb2coXCJpbiBkaXNwbGF5IHRvZG9zXCIpO1xuICBcbiAgd2lwZUNvbnRhaW5lcihjb21tZW50c0NvbnRhaW5lcik7XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobGlzdC5pdGVtcykpIHtcbiAgICBsZXQgY2FyZCA9IGJ1aWxkQ2FyZChrZXksIHZhbHVlKTtcbiAgICBjb21tZW50c0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRDYXJkKGtleSwgdmFsdWUpIHtcbiAgbGV0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIpO1xuXG4gIGxldCBjYXJkQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNhcmRCb2R5LmNsYXNzTGlzdC5hZGQoXCJjYXJkLWJvZHlcIik7XG5cbiAgbGV0IGNhcmRIZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICBjYXJkSGVhZC5jbGFzc0xpc3QuYWRkKFwiY2FyZC10aXRsZVwiKTtcbiAgY2FyZEhlYWQuaW5uZXJIVE1MID0gdmFsdWUudGl0bGU7XG5cbiAgbGV0IGNhcmREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGNhcmREYXRlLmNsYXNzTGlzdC5hZGQoXCJjYXJkLXRleHRcIik7XG4gIGNhcmREYXRlLmlubmVySFRNTCA9IHZhbHVlLmR1ZURhdGU7XG5cbiAgY2FyZEJvZHkuYXBwZW5kQ2hpbGQoY2FyZEhlYWQpO1xuICBjYXJkQm9keS5hcHBlbmRDaGlsZChjYXJkRGF0ZSk7XG5cbiAgY2FyZC5hcHBlbmRDaGlsZChjYXJkQm9keSk7XG5cbiAgY2FyZC5kYXRhc2V0LmlkID0ga2V5O1xuXG4gIHJldHVybiBjYXJkO1xufTsiXSwibmFtZXMiOlsidG9kb0l0ZW0iLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJ0aGlzIiwibm90ZXMiLCJjaGVja2xpc3QiLCJ0b2RvTGlzdCIsIml0ZW1zIiwiYWN0aXZlIiwiY3JlYXRlVG9Eb0xpc3QiLCJsb2FkRnJvbVN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2F2ZVRvU3RvcmFnZSIsImxpc3RDb2xsZWN0aW9uIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb21tZW50c0NvbnRhaW5lciIsImRpc3BsYXlMaXN0Iiwid2lwZUNvbnRhaW5lciIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJkYXRhc2V0IiwiaWQiLCJpbm5lckhUTUwiLCJkaXNwbGF5VG9Eb3MiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNoYW5nZUFjdGl2ZSIsInRhcmdldCIsImFwcGVuZENoaWxkIiwiZ2V0QWN0aXZlTGlzdCIsImNoaWxkcmVuIiwiaSIsImxlbmd0aCIsImNoaWxkIiwiY29uc29sZSIsImxvZyIsImZpcnN0Q2hpbGQiLCJyZW1vdmUiLCJnZXRLZXkiLCJsaXN0IiwibmV3S2V5Iiwia2V5cyIsInBhcnNlSW50IiwiY3VycmVudCIsImNoYW5naW5nTGlzdCIsIm9sZExpc3QiLCJjYXJkIiwiYnVpbGRDYXJkIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2FyZEJvZHkiLCJjYXJkSGVhZCIsImNhcmREYXRlIiwidG9kbyIsImluZm8iLCJjcmVhdGVOZXdUb0RvIiwiYWN0aXZlTGlzdERvbSIsIm5ld0xpc3QiLCJ3aW5kb3ciLCJvbmxvYWQiLCJpbml0aWFsaXplUGFnZSIsImNoZWNrTG9jYWxGb3JFbXB0eSJdLCJzb3VyY2VSb290IjoiIn0=