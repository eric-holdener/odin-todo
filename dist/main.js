(()=>{"use strict";class t{constructor(t,e,n,d){this.title=t,this.description=e,this.dueDate=n,this.priority=d,this.notes=[],this.checklist=[]}}class e{constructor(t){this.title=t,this.items={},this.active=!1}}function n(t){return new e(t)}function d(){return JSON.parse(localStorage.getItem("listCollection"))}function i(t){localStorage.setItem("listCollection",JSON.stringify(t))}const a=document.getElementById("lists-container"),l=document.getElementById("comments-container");function c(t){s(a);for(const[e,n]of Object.entries(t)){let t=document.createElement("button");t.dataset.id=e,t.innerHTML=n.title,1==n.active?(t.dataset.active=!0,u(n)):(t.dataset.active=!1,t.addEventListener("click",(function(t){m(t.target)}))),a.appendChild(t)}}function o(){let t=a.children;for(let e=0;e<t.length;e++){let n=t[e];if("true"==n.dataset.active)return n}}function s(t){for(;t.firstChild;)t.firstChild.remove()}function r(t){let e,n=Object.keys(t);return e=n.length>0?parseInt(n[n.length-1])+1:1,e}function m(t){let e=o(),n=d(),a=n[parseInt(t.dataset.id)],l=n[parseInt(e.dataset.id)];a.active=!0,l.active=!1,n[parseInt(t.dataset.id)]=a,n[parseInt(e.dataset.id)]=l,i(n),c(n)}function u(t){s(l);for(const[e,n]of Object.entries(t.items)){let t=p(e,n);l.appendChild(t)}}function p(t,e){let n=document.createElement("div");n.classList.add("card");let d=document.createElement("div");d.classList.add("card-body");let i=document.createElement("h2");i.classList.add("card-title"),i.innerHTML=e.title;let a=document.createElement("p");a.classList.add("card-text"),a.innerHTML=e.dueDate;let l=function(t,e){let n=document.createElement("div");n.classList.add("modal"),n.classList.add("fade"),n.setAttribute("id",`modalComment${t}`),n.setAttribute("tab-index","-1"),n.setAttribute("aria-labelledby",`modalComment${t}Label`),n.setAttribute("aria-hidden","true");let d=document.createElement("div");d.classList.add("modal-dialog");let i=document.createElement("div");i.classList.add("modal-content");let a=document.createElement("div");a.classList.add("modal-header");let l=document.createElement("h5");l.setAttribute("id",`modalComment${t}Label`),l.innerHTML=e.title;let c=document.createElement("div");c.classList.add("modal-body");let o=document.createElement("p");o.innerHTML=e.description;let s=document.createElement("p");s.innerHTML=e.dueDate;let r=document.createElement("div");r.classList.add("modalFooter");let m=document.createElement("button");return m.classList.add("btn"),m.classList.add("btn-primary"),m.setAttribute("data-bs-dismiss","modal"),m.innerHTML="Close",c.appendChild(o),c.appendChild(s),a.appendChild(l),r.appendChild(m),i.appendChild(a),i.appendChild(c),i.appendChild(r),d.appendChild(i),n.appendChild(d),n}(t,e),c=document.createElement("button");return c.classList.add("btn"),c.classList.add("btn-primary"),c.addEventListener("click",(function(){new bootstrap.Modal(document.getElementById(`modalComment${t}`)).show()})),c.innerHTML="Show Comment",d.appendChild(i),d.appendChild(a),d.appendChild(c),d.appendChild(l),n.appendChild(d),n.dataset.id=t,n}document.getElementById("add-todo").addEventListener("click",(function(){let e=function(){let e=[document.getElementById("title").value,document.getElementById("description").value,document.getElementById("dueDate").value,document.getElementById("priority").value];return new t(e[0],e[1],e[2],e[3])}(),n=o(),a=d(),l=a[n.dataset.id],c=r(l.items);l.items[c]=e,a[n.dataset.id]=l,i(a),u(l),document.getElementById("title").value="",document.getElementById("description").value="",document.getElementById("dueDate").value="",document.getElementById("priority").value="",document.getElementById("collapseExample").toggle})),document.getElementById("add-todolist").addEventListener("click",(function(){let t=n(document.getElementById("list-title").value),e=d();e[r(e)]=t,i(e),c(e)})),window.onload=function(){c(function(){let t;return t=0==localStorage.length?function(){let t={},e=n("Default List");return e.active=!0,t[1]=e,i(t),t}():d(),t}())}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFjbkQsUUFBUUMsSUFBTWdCLEVBQzNDakMsRUFBY0MsR0FFZGtCLEVBQWFjLEdBaUtiNUIsU0FBU0MsZUFBZSxTQUFTSyxNQUFRLEdBQ3pDTixTQUFTQyxlQUFlLGVBQWVLLE1BQVEsR0FDL0NOLFNBQVNDLGVBQWUsV0FBV0ssTUFBUSxHQUMzQ04sU0FBU0MsZUFBZSxZQUFZSyxNQUFRLEdBRTVDTixTQUFTQyxlQUFlLG1CQUFtQjhELFVBbEs3Qy9ELFNBQVNDLGVBQWUsZ0JBQWdCYyxpQkFBaUIsU0FBUyxXQUNoRSxJQUNJaUQsRUFBVTNFLEVBc0VGVyxTQUFTQyxlQUFlLGNBQWNLLE9BckU5Q1YsRUFBaUJOLElBR3JCTSxFQUZVK0IsRUFBTy9CLElBRUtvRSxFQUN0QnJFLEVBQWNDLEdBQ2RPLEVBQVlQLE1BSWRxRSxPQUFPQyxPQUFTLFdBRWQvRCxFQThDRixXQUNFLElBQUlQLEVBT0osT0FKRUEsRUFEeUIsR0FBdkJILGFBQWE4QixPQTlDbkIsV0FDRSxJQUFJM0IsRUFBaUIsR0FDakJnQyxFQUFPdkMsRUFBZSxnQkFNMUIsT0FMQXVDLEVBQUt4QyxRQUFTLEVBRWRRLEVBQWUsR0FBS2dDLEVBQ3BCakMsRUFBY0MsR0FFUEEsRUF1Q1l1RSxHQUVBN0UsSUFFWk0sRUF2RGN3RSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10b2RvLy4vc3JjL3RvZG8taXRlbS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvdG9kby1saXN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9sb2NhbFN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIHRvZG9JdGVtIHtcbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSkge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgdGhpcy5ub3RlcyA9IFtdO1xuICAgIHRoaXMuY2hlY2tsaXN0ID0gW107XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVOZXdUb0RvKCkge1xuICBsZXQgaW5mbyA9IGdldFRvZG9JbmZvKCk7XG5cbiAgbGV0IHRpdGxlID0gaW5mb1swXSxcbiAgICAgIGRlc2NyaXB0aW9uID0gaW5mb1sxXSwgXG4gICAgICBkdWVEYXRlID0gaW5mb1syXSwgXG4gICAgICBwcmlvcml0eSA9IGluZm9bM107XG5cbiAgbGV0IHRvZG8gPSBuZXcgdG9kb0l0ZW0odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSk7XG4gIHJldHVybiB0b2RvO1xufTtcblxuZnVuY3Rpb24gZ2V0VG9kb0luZm8oKSB7XG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XG4gIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpLnZhbHVlO1xuICBsZXQgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuXG4gIHJldHVybiBbXG4gICAgdGl0bGUsIFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGR1ZURhdGUsXG4gICAgcHJpb3JpdHlcbiAgXTtcbn07XG5cbiIsImNsYXNzIHRvZG9MaXN0IHtcbiAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5pdGVtcyA9IHt9O1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUb0RvTGlzdCh0aXRsZSkge1xuICBsZXQgbGlzdCA9IG5ldyB0b2RvTGlzdCh0aXRsZSk7XG4gIHJldHVybiBsaXN0O1xufTtcblxuIiwiZnVuY3Rpb24gbG9hZEZyb21TdG9yYWdlKCkge1xuICBsZXQgbGlzdENvbGxlY3Rpb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibGlzdENvbGxlY3Rpb25cIikpO1xuICByZXR1cm4gbGlzdENvbGxlY3Rpb247XG59O1xuXG5mdW5jdGlvbiBzYXZlVG9TdG9yYWdlKGxpc3RDb2xsZWN0aW9uKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibGlzdENvbGxlY3Rpb25cIiwgSlNPTi5zdHJpbmdpZnkobGlzdENvbGxlY3Rpb24pKTtcbn07XG5cbmV4cG9ydCB7IGxvYWRGcm9tU3RvcmFnZSwgc2F2ZVRvU3RvcmFnZSB9IiwiaW1wb3J0IGNyZWF0ZU5ld1RvRG8gZnJvbSBcIi4vdG9kby1pdGVtXCI7XG5pbXBvcnQgY3JlYXRlVG9Eb0xpc3QgZnJvbSBcIi4vdG9kby1saXN0XCI7XG5pbXBvcnQgeyBzYXZlVG9TdG9yYWdlLCBsb2FkRnJvbVN0b3JhZ2UgfSBmcm9tIFwiLi9sb2NhbFN0b3JhZ2VcIjtcblxuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXN0cy1jb250YWluZXJcIik7XG5jb25zdCBjb21tZW50c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tbWVudHMtY29udGFpbmVyXCIpO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC10b2RvXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgbGV0IHRvZG8gPSBjcmVhdGVOZXdUb0RvKCk7XG4gIGxldCBhY3RpdmVMaXN0RG9tID0gZ2V0QWN0aXZlTGlzdCgpO1xuXG4gIGxldCBsaXN0Q29sbGVjdGlvbiA9IGxvYWRGcm9tU3RvcmFnZSgpO1xuICBsZXQgbGlzdCA9IGxpc3RDb2xsZWN0aW9uW2FjdGl2ZUxpc3REb20uZGF0YXNldC5pZF1cblxuICBsZXQga2V5ID0gZ2V0S2V5KGxpc3QuaXRlbXMpO1xuICBsaXN0Lml0ZW1zW2tleV0gPSB0b2RvO1xuXG4gIGxpc3RDb2xsZWN0aW9uW2FjdGl2ZUxpc3REb20uZGF0YXNldC5pZF0gPSBsaXN0O1xuICBzYXZlVG9TdG9yYWdlKGxpc3RDb2xsZWN0aW9uKTtcblxuICBkaXNwbGF5VG9Eb3MobGlzdCk7XG4gIHJlc2V0Q29tbWVudEZvcm0oKTtcbn0pO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC10b2RvbGlzdFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gIGxldCB0aXRsZSA9IGdldFRvZG9MaXN0SW5mbygpO1xuICBsZXQgbmV3TGlzdCA9IGNyZWF0ZVRvRG9MaXN0KHRpdGxlKTtcbiAgbGV0IGxpc3RDb2xsZWN0aW9uID0gbG9hZEZyb21TdG9yYWdlKCk7XG4gIGxldCBrZXkgPSBnZXRLZXkobGlzdENvbGxlY3Rpb24pO1xuXG4gIGxpc3RDb2xsZWN0aW9uW2tleV0gPSBuZXdMaXN0O1xuICBzYXZlVG9TdG9yYWdlKGxpc3RDb2xsZWN0aW9uKTtcbiAgZGlzcGxheUxpc3QobGlzdENvbGxlY3Rpb24pO1xuXG59KVxuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gIGxldCBsaXN0Q29sbGVjdGlvbiA9IGNoZWNrTG9jYWxGb3JFbXB0eSgpO1xuICBkaXNwbGF5TGlzdChsaXN0Q29sbGVjdGlvbik7XG59OyBcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVBhZ2UoKSB7XG4gIGxldCBsaXN0Q29sbGVjdGlvbiA9IHt9O1xuICBsZXQgbGlzdCA9IGNyZWF0ZVRvRG9MaXN0KFwiRGVmYXVsdCBMaXN0XCIpO1xuICBsaXN0LmFjdGl2ZSA9IHRydWU7XG5cbiAgbGlzdENvbGxlY3Rpb25bMV0gPSBsaXN0O1xuICBzYXZlVG9TdG9yYWdlKGxpc3RDb2xsZWN0aW9uKTtcblxuICByZXR1cm4gbGlzdENvbGxlY3Rpb247XG59O1xuXG5mdW5jdGlvbiBkaXNwbGF5TGlzdChsaXN0Q29sbGVjdGlvbikge1xuICB3aXBlQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGxpc3RDb2xsZWN0aW9uKSkge1xuICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvbi5kYXRhc2V0LmlkID0ga2V5O1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSB2YWx1ZS50aXRsZTtcbiAgXG4gICAgaWYgKHZhbHVlLmFjdGl2ZSA9PSB0cnVlKSB7XG4gICAgICBidXR0b24uZGF0YXNldC5hY3RpdmUgPSB0cnVlO1xuICAgICAgZGlzcGxheVRvRG9zKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uLmRhdGFzZXQuYWN0aXZlID0gZmFsc2U7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY2hhbmdlQWN0aXZlKGUudGFyZ2V0KTtcbiAgICAgIH0pXG4gICAgfTtcbiAgXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gIH07XG59O1xuXG5mdW5jdGlvbiBnZXRBY3RpdmVMaXN0KCkge1xuICBsZXQgY2hpbGRyZW4gPSBjb250YWluZXIuY2hpbGRyZW47XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcblxuICAgIGlmIChjaGlsZC5kYXRhc2V0LmFjdGl2ZSA9PSBcInRydWVcIikge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH07XG4gIH07XG59O1xuXG5mdW5jdGlvbiBjaGVja0xvY2FsRm9yRW1wdHkgKCkge1xuICBsZXQgbGlzdENvbGxlY3Rpb247XG5cbiAgaWYgKGxvY2FsU3RvcmFnZS5sZW5ndGggPT0gMCkge1xuICAgIGxpc3RDb2xsZWN0aW9uID0gaW5pdGlhbGl6ZVBhZ2UoKTtcbiAgfSBlbHNlIHtcbiAgICBsaXN0Q29sbGVjdGlvbiA9IGxvYWRGcm9tU3RvcmFnZSgpO1xuICB9O1xuICByZXR1cm4gbGlzdENvbGxlY3Rpb247XG59O1xuXG5mdW5jdGlvbiBnZXRUb2RvTGlzdEluZm8oKSB7XG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdC10aXRsZVwiKS52YWx1ZTtcbiAgcmV0dXJuIHRpdGxlO1xufTtcblxuZnVuY3Rpb24gd2lwZUNvbnRhaW5lcihjb250YWluZXIpIHtcbiAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgY29udGFpbmVyLmZpcnN0Q2hpbGQucmVtb3ZlKCk7XG4gIH07XG59O1xuXG5mdW5jdGlvbiBnZXRLZXkobGlzdCkge1xuICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGxpc3QpO1xuXG4gIGxldCBuZXdLZXk7XG4gIGlmIChrZXlzLmxlbmd0aCA+IDApIHtcbiAgICBuZXdLZXkgPSBwYXJzZUludChrZXlzW2tleXMubGVuZ3RoLTFdKSArIDE7XG4gIH0gZWxzZSB7XG4gICAgbmV3S2V5ID0gMTtcbiAgfVxuXG4gIHJldHVybiBuZXdLZXk7XG59O1xuXG5mdW5jdGlvbiBjaGFuZ2VBY3RpdmUodGFyZ2V0KSB7XG4gIGxldCBjdXJyZW50ID0gZ2V0QWN0aXZlTGlzdCgpO1xuICBcbiAgbGV0IGxpc3RDb2xsZWN0aW9uID0gbG9hZEZyb21TdG9yYWdlKCk7XG4gIGxldCBjaGFuZ2luZ0xpc3QgPSBsaXN0Q29sbGVjdGlvbltwYXJzZUludCh0YXJnZXQuZGF0YXNldC5pZCldO1xuICBsZXQgb2xkTGlzdCA9IGxpc3RDb2xsZWN0aW9uW3BhcnNlSW50KGN1cnJlbnQuZGF0YXNldC5pZCldO1xuICBjaGFuZ2luZ0xpc3QuYWN0aXZlID0gdHJ1ZTtcbiAgb2xkTGlzdC5hY3RpdmUgPSBmYWxzZTtcbiAgbGlzdENvbGxlY3Rpb25bcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuaWQpXSA9IGNoYW5naW5nTGlzdDtcbiAgbGlzdENvbGxlY3Rpb25bcGFyc2VJbnQoY3VycmVudC5kYXRhc2V0LmlkKV0gPSBvbGRMaXN0O1xuICBzYXZlVG9TdG9yYWdlKGxpc3RDb2xsZWN0aW9uKTtcbiAgZGlzcGxheUxpc3QobGlzdENvbGxlY3Rpb24pO1xufTtcblxuZnVuY3Rpb24gZGlzcGxheVRvRG9zKGxpc3QpIHtcbiAgd2lwZUNvbnRhaW5lcihjb21tZW50c0NvbnRhaW5lcik7XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobGlzdC5pdGVtcykpIHtcbiAgICBsZXQgY2FyZCA9IGJ1aWxkQ2FyZChrZXksIHZhbHVlKTtcbiAgICBjb21tZW50c0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRDYXJkKGtleSwgdmFsdWUpIHtcbiAgbGV0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjYXJkLmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIpO1xuXG4gIGxldCBjYXJkQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNhcmRCb2R5LmNsYXNzTGlzdC5hZGQoXCJjYXJkLWJvZHlcIik7XG5cbiAgbGV0IGNhcmRIZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICBjYXJkSGVhZC5jbGFzc0xpc3QuYWRkKFwiY2FyZC10aXRsZVwiKTtcbiAgY2FyZEhlYWQuaW5uZXJIVE1MID0gdmFsdWUudGl0bGU7XG5cbiAgbGV0IGNhcmREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGNhcmREYXRlLmNsYXNzTGlzdC5hZGQoXCJjYXJkLXRleHRcIik7XG4gIGNhcmREYXRlLmlubmVySFRNTCA9IHZhbHVlLmR1ZURhdGU7XG5cbiAgbGV0IG1vZGFsID0gYnVpbGRNb2RhbChrZXksIHZhbHVlKTtcblxuICBsZXQgb3Blbk1vZGFsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgb3Blbk1vZGFsQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidG5cIik7XG4gIG9wZW5Nb2RhbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnRuLXByaW1hcnlcIik7XG4gIG9wZW5Nb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IG1vZGFsID0gbmV3IGJvb3RzdHJhcC5Nb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbW9kYWxDb21tZW50JHtrZXl9YCkpO1xuICAgIG1vZGFsLnNob3coKTtcbiAgfSk7XG4gIG9wZW5Nb2RhbEJ1dHRvbi5pbm5lckhUTUwgPSBcIlNob3cgQ29tbWVudFwiO1xuXG4gIGNhcmRCb2R5LmFwcGVuZENoaWxkKGNhcmRIZWFkKTtcbiAgY2FyZEJvZHkuYXBwZW5kQ2hpbGQoY2FyZERhdGUpO1xuICBjYXJkQm9keS5hcHBlbmRDaGlsZChvcGVuTW9kYWxCdXR0b24pO1xuICBjYXJkQm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG5cbiAgY2FyZC5hcHBlbmRDaGlsZChjYXJkQm9keSk7XG5cbiAgY2FyZC5kYXRhc2V0LmlkID0ga2V5O1xuXG4gIHJldHVybiBjYXJkO1xufTtcblxuZnVuY3Rpb24gcmVzZXRDb21tZW50Rm9ybSgpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZSA9IFwiXCI7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIikudmFsdWUgPSBcIlwiO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlID0gXCJcIjtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbGxhcHNlRXhhbXBsZVwiKS50b2dnbGU7XG59O1xuXG5mdW5jdGlvbiBidWlsZE1vZGFsKGtleSwgdmFsdWUpIHtcbiAgbGV0IG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbW9kYWxDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm1vZGFsXCIpO1xuICBtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZmFkZVwiKTtcbiAgbW9kYWxDb250YWluZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgYG1vZGFsQ29tbWVudCR7a2V5fWApO1xuICBtb2RhbENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJ0YWItaW5kZXhcIiwgXCItMVwiKTtcbiAgbW9kYWxDb250YWluZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGBtb2RhbENvbW1lbnQke2tleX1MYWJlbGApO1xuICBtb2RhbENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG5cbiAgbGV0IG1vZGFsRGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbW9kYWxEaWFsb2cuY2xhc3NMaXN0LmFkZChcIm1vZGFsLWRpYWxvZ1wiKTtcblxuICBsZXQgbW9kYWxDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbW9kYWxDb250ZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbC1jb250ZW50XCIpO1xuXG4gIGxldCBtb2RhbEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIG1vZGFsSGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJtb2RhbC1oZWFkZXJcIik7XG4gIFxuICBsZXQgbW9kYWxUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNVwiKTtcbiAgbW9kYWxUaXRsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgbW9kYWxDb21tZW50JHtrZXl9TGFiZWxgKTtcbiAgbW9kYWxUaXRsZS5pbm5lckhUTUwgPSB2YWx1ZS50aXRsZTtcblxuICBsZXQgbW9kYWxCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbW9kYWxCb2R5LmNsYXNzTGlzdC5hZGQoXCJtb2RhbC1ib2R5XCIpO1xuXG4gIGxldCBtb2RhbERlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIG1vZGFsRGVzY3JpcHRpb24uaW5uZXJIVE1MID0gdmFsdWUuZGVzY3JpcHRpb247XG5cbiAgbGV0IG1vZGFsRHVlZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBtb2RhbER1ZWRhdGUuaW5uZXJIVE1MID0gdmFsdWUuZHVlRGF0ZTtcblxuICBsZXQgbW9kYWxGb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBtb2RhbEZvb3Rlci5jbGFzc0xpc3QuYWRkKFwibW9kYWxGb290ZXJcIik7XG5cbiAgbGV0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgY2xvc2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImJ0blwiKTtcbiAgY2xvc2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImJ0bi1wcmltYXJ5XCIpO1xuICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJzLWRpc21pc3NcIiwgXCJtb2RhbFwiKTtcbiAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCJDbG9zZVwiXG5cbiAgbW9kYWxCb2R5LmFwcGVuZENoaWxkKG1vZGFsRGVzY3JpcHRpb24pO1xuICBtb2RhbEJvZHkuYXBwZW5kQ2hpbGQobW9kYWxEdWVkYXRlKTtcblxuICBtb2RhbEhlYWRlci5hcHBlbmRDaGlsZChtb2RhbFRpdGxlKTtcblxuICBtb2RhbEZvb3Rlci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XG5cbiAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKG1vZGFsSGVhZGVyKTtcbiAgbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKG1vZGFsQm9keSk7XG4gIG1vZGFsQ29udGVudC5hcHBlbmRDaGlsZChtb2RhbEZvb3Rlcik7XG5cbiAgbW9kYWxEaWFsb2cuYXBwZW5kQ2hpbGQobW9kYWxDb250ZW50KTtcblxuICBtb2RhbENvbnRhaW5lci5hcHBlbmRDaGlsZChtb2RhbERpYWxvZyk7XG5cbiAgcmV0dXJuIG1vZGFsQ29udGFpbmVyO1xufTsiXSwibmFtZXMiOlsidG9kb0l0ZW0iLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJ0aGlzIiwibm90ZXMiLCJjaGVja2xpc3QiLCJ0b2RvTGlzdCIsIml0ZW1zIiwiYWN0aXZlIiwiY3JlYXRlVG9Eb0xpc3QiLCJsb2FkRnJvbVN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2F2ZVRvU3RvcmFnZSIsImxpc3RDb2xsZWN0aW9uIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb21tZW50c0NvbnRhaW5lciIsImRpc3BsYXlMaXN0Iiwid2lwZUNvbnRhaW5lciIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsImJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJkYXRhc2V0IiwiaWQiLCJpbm5lckhUTUwiLCJkaXNwbGF5VG9Eb3MiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNoYW5nZUFjdGl2ZSIsInRhcmdldCIsImFwcGVuZENoaWxkIiwiZ2V0QWN0aXZlTGlzdCIsImNoaWxkcmVuIiwiaSIsImxlbmd0aCIsImNoaWxkIiwiZmlyc3RDaGlsZCIsInJlbW92ZSIsImdldEtleSIsImxpc3QiLCJuZXdLZXkiLCJrZXlzIiwicGFyc2VJbnQiLCJjdXJyZW50IiwiY2hhbmdpbmdMaXN0Iiwib2xkTGlzdCIsImNhcmQiLCJidWlsZENhcmQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjYXJkQm9keSIsImNhcmRIZWFkIiwiY2FyZERhdGUiLCJtb2RhbCIsIm1vZGFsQ29udGFpbmVyIiwic2V0QXR0cmlidXRlIiwibW9kYWxEaWFsb2ciLCJtb2RhbENvbnRlbnQiLCJtb2RhbEhlYWRlciIsIm1vZGFsVGl0bGUiLCJtb2RhbEJvZHkiLCJtb2RhbERlc2NyaXB0aW9uIiwibW9kYWxEdWVkYXRlIiwibW9kYWxGb290ZXIiLCJjbG9zZUJ1dHRvbiIsImJ1aWxkTW9kYWwiLCJvcGVuTW9kYWxCdXR0b24iLCJib290c3RyYXAiLCJNb2RhbCIsInNob3ciLCJ0b2RvIiwiaW5mbyIsImNyZWF0ZU5ld1RvRG8iLCJhY3RpdmVMaXN0RG9tIiwidG9nZ2xlIiwibmV3TGlzdCIsIndpbmRvdyIsIm9ubG9hZCIsImluaXRpYWxpemVQYWdlIiwiY2hlY2tMb2NhbEZvckVtcHR5Il0sInNvdXJjZVJvb3QiOiIifQ==